---
import { getCollection } from 'astro:content';
import ProjectCard from './ProjectCard.astro';

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => (a.data.order || 0) - (b.data.order || 0));
---

<section id="work" class="px-6 py-20">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-3xl font-bold mb-4">Shipped Products</h2>
    <p class="text-neutral-400 mb-12 max-w-2xl">
      Apps I've strategized, designed, and built â€” from concept to App Store.
    </p>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {sortedProjects.map((project) => (
        <ProjectCard
          title={project.data.title}
          slug={project.data.slug}
          tagline={project.data.tagline}
          primaryColor={project.data.primaryColor}
          featuredScreenshot={project.data.featuredScreenshot}
          storeLinks={project.data.storeLinks}
        />
      ))}
    </div>
  </div>
</section>
