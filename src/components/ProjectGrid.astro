---
import { getCollection } from 'astro:content';
import ProjectRow from './ProjectRow.astro';

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => (a.data.order || 0) - (b.data.order || 0));
---

<section id="work" class="py-16">
  <div class="max-w-6xl mx-auto px-6 mb-12">
    <h2 class="text-3xl md:text-4xl font-bold mb-4">App Portfolio</h2>
  </div>

  <div>
    {sortedProjects.map((project, index) => (
      <ProjectRow
        title={project.data.title}
        slug={project.data.slug}
        tagline={project.data.tagline}
        description={project.body}
        primaryColor={project.data.primaryColor}
        tag={project.data.tag}
        featuredScreenshot={project.data.featuredScreenshot}
        screenshots={project.data.screenshots}
        storeLinks={project.data.storeLinks}
        reversed={index % 2 === 1}
      />
    ))}
  </div>
</section>
